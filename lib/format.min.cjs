"use strict";
/*!
The MIT License (MIT)
Copyright (c) spurreiter
*/const e="plural",t="select",r=t+"ordinal",n=[e,t,r],s={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric",second:void 0},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},o={number:[s.number],date:[s.date],time:[s.time,s.time.medium]},c=(e,[t,r={},n="/"])=>e.reduce(((e,r)=>{const[s]=r.split(n,1),o=r.slice(s.length+1);return!o?.length&&t[s]?Object.assign(e,t[s]):e[s]=o,e}),{...r}),u=({part:e,level:t,prop:r,type:s,options:u})=>{if((e=>e%2==0)(t))return{str:e,level:t};let i,m,a={},[l,p,h]=e.split(",").map((e=>e.trim()));if(!l)return null;!p&&s&&(h=l,l=r,p=s,a=u);const d=h?.split(/\s+/)||[],f=o[p];if(f?a=c(d,f):(i=d.slice(-1)[0],a={...a,...c(d,[{},{},":"])},m=a[i]=[]),!h&&n.includes(p))throw new TypeError(`type "${p}" needs a matcher`);return{prop:l,type:p,options:a,level:t,parts:m}};function i(e){let t="",r=0;const n=[],s={},o={0:n};for(let n=0;n<e.length;n++){const c=e[n];switch(c){case"{":{const e=u({...s[r],part:t,level:r});e.str&&o[r].push(e),s[r]=e,r++,o[r]=e.parts,t="";break}case"}":{const e=u({...s[r],part:t,level:r});o[r]?e&&o[r].push(e):(o[r-1].push(e||s[r]),s[r]=null),r--,t="",delete s[r+1];break}default:t+=c}}const c=u({...s[r],part:t,level:r});return c.str&&o[r].push(c),n}const m=(n,s,o)=>{const c=[];let u;for(let i=0;i<n.length;i++){const{str:a,prop:l,type:p,options:h}=n[i];if(a)c.push(a);else if(l)if(p){if(u!==p)switch(u=void 0,p){case"number":{const e=Number(s[l]),t=new Intl.NumberFormat(o,h).format(e);c.push(t);break}case"date":{const e=s[l],t=new Intl.DateTimeFormat(o,h).format(e);c.push(t);break}case"time":{const e=s[l],t=new Intl.DateTimeFormat(o,h).format(e);c.push(t);break}case e:{const e=Number(h.offset||0),t=Number(s[l]),r=new Intl.PluralRules(o).select(t),n=h[`=${t}`]||h[r]||h.other;if(!n)throw new TypeError(`type "${p}" needs an "other" match`);const u=m(n,s,o).replace("#",""+(t-e));c.push(u);break}case t:{const e=h[s[l]]||h.other;if(!e)throw new TypeError(`type "${p}" needs an "other" match`);const t=m(e,s,o);c.push(t);break}case r:{const e=Number(h.offset||0),t=Number(s[l]),r=new Intl.PluralRules(o,{type:"ordinal"}).select(t),n=h[`=${t}`]||h[r]||h.other;if(!n)throw new TypeError(`type "${p}" needs an "other" match`);const u=m(n,s,o).replace("#",""+(t-e));c.push(u);break}}}else{const e=String(s[l]??`{${l}}`);c.push(e)}}return c.join("")};exports.cached=function(){const e=new Map;return function(t="",r={},n="en"){if(!t.includes("{"))return t;let s=e.get(t);return s||(s=i(t),e.set(t,s)),m(s,r,n)}},exports.format=function(e="",t={},r="en"){if(!e.includes("{"))return e;const n=i(e);return m(n,t,r)},exports.parse=i;
